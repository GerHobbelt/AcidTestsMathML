<!doctype html>
<html>
 <head>
  <title>The Acid3 test (description)</title>
  <meta charset="utf-8"/>
  <style type="text/css">
    .framed {
      border: 1px dashed grey;
      background: #ddd;
    }
  </style>
 </head>
 <body>
  <h1>The Acid3 test (description)</h1>

<p><strong>Note: test 10 contains invalid markup: this is on purpose and intended to 
check error handling!</strong></p>

<h2>Introduction</h2>

<p>The MathML Acid3 test essentially relies on the classical Acid3 and just
modify the Javascript tests in order to verify some MathML features. Thus the
requirement to pass the MathML Acid3 is the same:</p>

<p style="border: 1px dotted black; padding: 1em; margin: 1em;">
To pass the test, a browser must use its default settings, the animation has to
be smooth, the score has to end on 100/100, and the final page has to look
exactly, pixel for pixel, like
<a href="reference.html">this reference rendering</a></p>

<p>The strategy
of the MathML Acid3 test is to let the browser layout MathML expressions
and to determine positions and sizes of elements via the
<code>getBoundingClientRect</code> Javascript function. This does not allow to
test features like colors or links, but these are already verified in the
MathML Acid2 test. In general, the MathML specification gives some freedom and
so the corresponding tests are not too strict: for example one test just
verifies that in an &lt;mfrac&gt; element, the numerator is above a
denominator and not precise coordinates or sizes.</p>

<p>Sometimes, a more accurate measurement is necessary. For that purpose,
the MathML Acid3 test uses a special Acid3MathML family made available as Web
fonts. These fonts contain characters used in the tests:
ASCII letters, mathematical alphanumeric Symbols (to test
<code>mathvariant</code>) and for some operators from the MathML Operator
Dictionary. Their sizes are given by the table below:</p>

<table style="margin-left: auto; margin-right: auto; text-align: center;"
       border="1">
  <caption>
    Acid3MathML fonts: size of characters
  </caption>
  <thead>
    <tr><th>Style</th><th>Width</th><th>Height</th>
      <th><math><mfrac><mi>Width</mi><mi>Height</mi></mfrac></math></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>bold-italic            </td><td>256</td><td>1024</td><td>1/4</td></tr>
    <tr><td>sans-serif-bold-italic </td><td>384</td><td>1024</td><td>3/8</td></tr>
    <tr><td>bold                   </td><td>512</td><td>1024</td><td>1/2</td></tr>
    <tr><td>bold script            </td><td>576</td><td>1024</td><td>9/16</td></tr>
    <tr><td>bold-fraktur           </td><td>640</td><td>1024</td><td>5/8</td></tr>
    <tr><td>sans-serif-bold        </td><td>704</td><td>1024</td><td>11/16</td></tr>
    <tr><td>italic                 </td><td>768</td><td>1024</td><td>3/4</td></tr>
    <tr><td>sans-serif-italic      </td><td>832</td><td>1024</td><td>13/16</td></tr>
    <tr><td>monospace              </td><td>896</td><td>1024</td><td>7/8</td></tr>
    <tr><td>normal                </td><td>1024</td><td>1024</td><td>1</td></tr>
    <tr><td>script                </td><td>1088</td><td>1024</td><td>17/16</td></tr>
    <tr><td>fraktur               </td><td>1152</td><td>1024</td><td>9/8</td></tr>
    <tr><td>sans-serif            </td><td>1216</td><td>1024</td><td>19/16</td></tr>
    <tr><td>double-struck         </td><td>1280</td><td>1024</td><td>5/4</td></tr>
  </tbody>
</table>

<p>Some tests verify support for stretchy operators and the classical method
to draw them is to layout several glyphs horizontally or vertically.
Other tests rely on dimension from the MathML Operator Dictionary that are
given in 1/18 of em. In these two cases, an accurate size can not be
achieved because of rounding errors and other approximations. Hence the 
equality tests are relaxed and a small error is tolerated.</p>

<p>The MathML tests are contained in a div of width 10000 pixels and this is
assumed to be large enough so that automatic line breaking does not happen by
default. Of course, tests for the line breaking use narrower containers.</p>

<h3>Test 0</h3>

<p>This is a very simple test to start with:</p>

<ul>
<li>The "JS required" message is removed.</li>
<li>The namespace URI on a <code>&lt;math&gt;</code> is tested and should be
<code>http://www.w3.org/1998/Math/MathML</code>.</li>
<li>Test that inline math (default)
  does not break (bottom of X and Y are aligned):
  <p class="framed">
    <math><mtext>X</mtext></math>
    <math><mtext>Y</mtext></math>
  </p>
</li>
<li>Test that display math (<code>display="block"</code>)
breaks (bottom of X is at most as low as top of Y):
      <p  class="framed">
        <math><mtext>X</mtext></math>
        <math display="block"><mtext>Y</mtext></math>
      </p>
</li>

</ul>



<h2>Bucket 1: Basic Presentation MathML Elements</h2>

<p>...</p>

<h2>Bucket 2: More Advanced Presentation Attributes</h2>

<p>...</p>

<h2>Bucket 3: Displaystyle, Scriptlevel and Operators</h2>

<p>...</p>

<h2>Bucket 4: More Features of Operators</h2>

<p>...</p>

<h2>Bucket 5: Directionality and Linebreaking</h2>

<p>...</p>

<h2>Bucket 6: Alignment and Elementary Mathematics</h2>

<p>...</p>

<h2>Other Special tests</h2>

<p>...</p>

 </body>
</html>
